<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>MyGreenCar</title>

  <!-- Bootstrap core CSS -->
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom fonts for this template -->
  <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" href="vendor/simple-line-icons/css/simple-line-icons.css">
  <link href="https://fonts.googleapis.com/css?family=Raleway:300,400" rel="stylesheet">

  <!-- Plugin CSS -->
  <link rel="stylesheet" href="device-mockups/device-mockups.min.css">

  <!-- Custom styles for this template -->
  <link href="css/new-age.css" rel="stylesheet">

</head>

<body id="page-top">

  <nav class="navbar">
    <a class="navbar-brand" href="http://www.mygreencar.com">MyGreenCar</a>
  </nav>

  <header class="masthead">
    <div class="container h-100">
      <div class="row h-100">
        <div class="col-lg-7 my-auto">
          <div class="header-content mx-auto">
            <h1 class="mb-4 main-title">Car shopping<br>made simple and<br>personal.</h1>
            <h2 class="mb-4">Find, compare and buy your next car all in one place.</h2>
            <div class="my-5">
                <a id="ios_link" href="#download" class="badge-link badge-link-ios" href="#"><img src="img/app-store-badge.svg" alt=""
                  style="height: 60px;"></a>
            </div>
          </div>
        </div>
        <div class="col-lg-5 my-auto">
          <img class="img-fluid" src="img/iPhone-X-Mockup_201904-RESULTS SCREEN.png">
        </div>
      </div>
    </div>
  </header>

  <section class="features" id="features">
    <div class="container">
      <div class="section-heading text-center">
        <h2>YOU DRIVE<br>WE ANALYZE<br>YOU SAVE</h2>
        <hr>
      </div>

      <div class="row">
        <div class="col-lg-5 mb-5">
          <img class="img-fluid" src="img/iPhone-X-Mockup_201904-HOME SCREEN.png">
        </div>
  
        <div class="col-lg-7 my-auto">
          <p>Until now, shopping for a car has been time-consuming, confusing, and overwhelming. 
              MyGreenCar does the hard work for you. We find and compare cars that makes sense for your life.<br>
              Never miss out on finding your perfect car.</p>

          <div class="my-5 text-center">
              <a id="ios_link" href="#download" class="badge-link badge-link-ios" href="#"><img src="img/app-store-badge.svg" alt=""
                style="height: 60px;"></a>
          </div>
        </div>
  
        
      </div>

      <div class="row">
          <div class="col-lg-5 mb-5">
            <img class="img-fluid" src="img/iPhone-X-Mockup_201904-TCO SCREEN.png">
          </div>
    
          <div class="col-lg-7 my-auto">
            
            <div class="my-3 text-center">
                <a class="btn btn-outline-dark" href="https://mygreencar.com">Learn more about MyGreenCar</a>
            </div>
            <div class="my-3 text-center">
                <a id="ios_link" href="#download" class="badge-link badge-link-ios" href="#"><img src="img/app-store-badge.svg" alt=""
                  style="height: 60px;"></a>
            </div>
          </div>
    
          
        </div>
    </div>
  </section>

  <footer>
    <div class="container">
      <p>&copy; MyGreenCar. All Rights Reserved.</p>
      <ul class="list-inline">
        <li class="list-inline-item">
          <a href="https://mygreencar.com/privacy-policy">Privacy</a>
        </li>
        <li class="list-inline-item">
          <a href="https://mygreencar.com/terms-of-use">Terms</a>
        </li>
        
      </ul>
    </div>
  </footer>

  <!-- Bootstrap core JavaScript -->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Plugin JavaScript -->
  <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

  <!-- Custom scripts for this template -->
  <!--<script src="js/new-age.min.js"></script> -->

  <!-- Campaign JS by AF -->
  <script>

    //Returns the value of a parameter existing in the page's URL or ' ' if not exists.
    function getParameterFromURL(name, url) {
      if (!url) url = window.location.href;
      name = name.replace(/[\[\]]/g, '\\$&');
      var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
        results = regex.exec(url);
      if (!results) return null;
      if (!results[2]) return '';
      return decodeURIComponent(results[2].replace(/\+/g, ' '));
    }

    function isMobileDevice() {
      return (typeof window.orientation !== "undefined") || (navigator.userAgent.indexOf('IEMobile') !== -1);
    }

    function getMobileOperatingSystem() {
      var userAgent = navigator.userAgent || navigator.vendor || window.opera;
      if (userAgent) {
        if (/android/i.test(userAgent)) {
          return "Android";
        }

        // iOS detection from: http://stackoverflow.com/a/9039885/177710
        if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
          return "iOS";
        }
      }
      return "unknown";
    }

    function isAFTrackingLink() {
      return getParameterFromURL('af_redirect');
    }

    function isFacebook() {
      if (document.referrer && document.referrer != "") {
        return document.referrer.toLowerCase().includes('facebook');
      } else {
        return false;
      }
    }

    // generateUrl returns the URL to use behind the iOS and Android "Download" buttons on a landing page, based on the source of the page visitor.
    // By default these buttons should direct to the apps' pages on iTunes and Google Play.
    // If these links should be kept with no change, generateUrl returns ' '.
    // Otherwise, generateUrl returns the URL to be used under BOTH buttons (a single app download button could also be used in this case).
    // Parameters: isDebug - if true, alerts are issued for each of the cases, otherwise not.  	 
    function generateUrl(isDebug) {
      var oneLinkURL = 'https://mgc.onelink.me/4rl1/94364e46';   // **** Replace with your own basic OneLink URL ****
      var webFormURL = 'https://yoursite.com/webform.html'; // **** Replace with your own web form URL for getting the user's email or SMS ****
      var finalURL = "";
      var partnerIDParam = '?pid=';
      var isCustomNetwork = false;

      var campaignValue;
      if (getParameterFromURL('af_c')) {
        campaignValue = getParameterFromURL('af_c');
      } else if (getParameterFromURL('utm_campaign')) {
        campaignValue = getParameterFromURL('utm_campaign');
      } else if (document.getElementsByTagName('title')[0]) {
        campaignValue = document.getElementsByTagName('title')[0].innerText;
      } else {
        campaignValue = 'unknown';
      }
      var campaignParam = '&c=';
      var gclidParam = '&af_sub1=';
      var gclidValue = getParameterFromURL('gclid');
      var kwParam = '&af_keywords=';
      var pidValue;
      var kwValue = getParameterFromURL('keyword');

      if (getParameterFromURL('af_pid')) {
        pidValue = getParameterFromURL('af_pid');
      } else if (getParameterFromURL('utm_source')) {
        pidValue = getParameterFromURL('utm_source'); isCustomNetwork = true;
      }


      var SRNs = [//list of supported SRNs
        'twitter_lp',
        'fbpost_lp',
        'snapchat_lp',
        'doubleclick_lp',
        'oath_lp',
        'yahoojapan_lp',

      ];

      // Desktop user
      if (!isMobileDevice()) {
        return webFormURL;
      }

      // User was redirected using af_r parameter on an AppsFlyer tracking link
      if (isAFTrackingLink()) {
        if (isDebug) {
          alert("This user comes from AppsFlyer by redirection and is ready to be attributed. \nKeep direct app store links.");
        }
        return; // in this case, the original store links in the install buttons stay the same

        /*
        If you want one install button in the landing page that serves both iOS and Android, uncomment the code below
        The code identifies the operating system and returns the relevant direct link to Google Play or iTunes
     
        if (getMobileOperatingSystem() === 'Android') {
          return 'direct link to Google Play';
        } 
     
        if (getMobileOperatingSystem() === 'iOS') {
          return 'direct link to iTunes';
        }
        */
      }

      // Google Ads
      if (gclidValue) {
        partnerIDParam += 'google_lp';
        campaignParam += campaignValue;
        gclidParam += gclidValue
        if (!kwValue) {
          finalURL = oneLinkURL + partnerIDParam + campaignParam + gclidParam;
          if (isDebug) {
            alert("This user comes from Google AdWords\n " + finalURL);
          }
          return finalURL;

        } else { // Google Ads with KW
          kwParam += kwValue;
          finalURL = oneLinkURL + partnerIDParam + campaignParam + gclidParam + kwParam;
          if (isDebug) {
            alert("This user comes from Google AdWords - there is a keyword associated with the ad\n " + finalURL);
          }
          return finalURL;
        }

        // Other SRNs and custom networks  
      } else if (pidValue) {
        if (SRNs.includes(pidValue) || isCustomNetwork) {
          campaignParam += campaignValue;
          partnerIDParam += pidValue;
          finalURL = oneLinkURL + partnerIDParam + campaignParam;
          if (isDebug) {
            alert("This user comes the SRN or custom network " + pidValue + "\n" + finalURL);
          }
          return finalURL;
        }
      } else if (isFacebook()) {
        if (isDebug) {
          alert("This user comes from a paid Facebook ad - don't do anything. \nKeep direct app store links.");
        }
        return ' ';

      } else { // organic mobile user
        campaignParam += campaignValue;
        partnerIDParam += 'website'; //**** Replace value if you wish organic users to be attributed to another media source than 'website' ****
        finalURL = oneLinkURL + partnerIDParam + campaignParam;
        if (isDebug) {
          alert("This user comes from an unknown mobile source.\n The user would be attributed to media source 'website' and to the campaign " + campaignParam + "\n" + finalURL);
        }
        return finalURL;
      }
    }

    // *** Set new links *** //
    window.onload = function () {
      var isDebug = false;
      var url = generateUrl(isDebug);

      // onelink is generated
      if (url) {
        //document.getElementById('andrd_link').setAttribute('href', url);
        //document.getElementById('ios_link').setAttribute('href', url);
        document.querySelectorAll('.badge-link-ios').forEach(a => a.setAttribute('href', url))
      }

      //otherwise, if onelink is not generated it means that the user is redirected
      // and the store links in the buttons stay the same

      /* for the one button solution for both Android and iOS, use the code below instead

      document.getElementById('store_link').setAttribute('href', url);

      */

    };
  </script>

</body>

</html>